[{"path":"http://andyteucher.ca/rmapshaper/CONDUCT.html","id":null,"dir":"","previous_headings":"","what":"Contributor Code of Conduct","title":"Contributor Code of Conduct","text":"contributors maintainers project, pledge respect people contribute reporting issues, posting feature requests, updating documentation, submitting pull requests patches, activities. committed making participation project harassment-free experience everyone, regardless level experience, gender, gender identity expression, sexual orientation, disability, personal appearance, body size, race, ethnicity, age, religion. Examples unacceptable behavior participants include use sexual language imagery, derogatory comments personal attacks, trolling, public private harassment, insults, unprofessional conduct. Project maintainers right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct. Project maintainers follow Code Conduct may removed project team. Instances abusive, harassing, otherwise unacceptable behavior may reported opening issue contacting andy.teucher@gmail.com. Code Conduct adapted Contributor Covenant (http:contributor-covenant.org), version 1.0.0, available http://contributor-covenant.org/version/1/0/0/","code":""},{"path":"http://andyteucher.ca/rmapshaper/articles/rmapshaper.html","id":"usage","dir":"Articles","previous_headings":"","what":"Usage","title":"rmapshaper Basics","text":"rmapshaper works sf objects well geojson strings (character objects class geo_json). also works Spatial classes sp package, though likely retired future; users encouraged use modern sf package. use nc.gpkg file (North Carolina county boundaries) sf package read sf object: Plot original:  Now simplify using default parameters, plot simplified North Carolina counties:  can see even high levels simplification, mapshaper simplification algorithm preserves topology, including shared boundaries. keep parameter specifies proportion vertices keep:  Compare output using sf::st_simplify, overlaps gaps evident:  time ’ll demonstrate ms_innerlines function:  functions quite fast geojson character objects. slower sf Spatial classes due internal conversion /json. going multiple operations large sf objects, ’s recommended first convert json using geojsonsf::sf_geojson(), geojsonio::geojson_json(). functions input object first argument, return class object input. , can chained together. totally contrived example, using nc_sf created :","code":"library(rmapshaper) library(sf) ## Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE file <- system.file(\"gpkg/nc.gpkg\", package = \"sf\") nc_sf <- read_sf(file) plot(nc_sf[\"FIPS\"]) nc_simp <- ms_simplify(nc_sf) plot(nc_simp[\"FIPS\"]) nc_very_simp <- ms_simplify(nc_sf, keep = 0.001) plot(nc_very_simp[\"FIPS\"]) nc_stsimp <- st_simplify(nc_sf, preserveTopology = TRUE, dTolerance = 10000) # dTolerance specified in meters plot(nc_stsimp[\"FIPS\"]) nc_sf_innerlines <- ms_innerlines(nc_sf) plot(nc_sf_innerlines) library(geojsonsf) library(rmapshaper) library(sf)  ## First convert 'states' dataframe from geojsonsf pkg to json  nc_sf %>%    sf_geojson() |>    ms_erase(bbox = c(-80, 35, -79, 35.5)) |>  # Cut a big hole in the middle   ms_dissolve() |>  # Dissolve county borders   ms_simplify(keep_shapes = TRUE, explode = TRUE) |> # Simplify polygon   geojson_sf() |> # Convert to sf object   plot(col = \"blue\") # plot"},{"path":"http://andyteucher.ca/rmapshaper/articles/rmapshaper.html","id":"using-the-system-mapshaper","dir":"Articles","previous_headings":"","what":"Using the system mapshaper","title":"rmapshaper Basics","text":"Sometimes dealing large spatial object R, rmapshaper functions take long time work . version 0.4.0, can make use system mapshaper library installed. allow work large spatial objects. First make sure mapshaper installed: get error, need install mapshaper. First install node (https://nodejs.org/en) install mapshaper command prompt : can use sys argument rmapshaper function:","code":"check_sys_mapshaper() $ npm install -g mapshaper nc_simp_sys <- ms_simplify(nc_sf, sys = TRUE)  plot(nc_simp_sys[, \"FIPS\"])"},{"path":"http://andyteucher.ca/rmapshaper/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Andy Teucher. Author, maintainer. Kenton Russell. Author.            JavaScript support Matthew Bloch. Copyright holder.            mapshaper Javascript library","code":""},{"path":"http://andyteucher.ca/rmapshaper/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Teucher , Russell K (2023). rmapshaper: Client 'mapshaper' 'Geospatial' Operations. https://github.com/ateucher/rmapshaper, http://andyteucher.ca/rmapshaper/.","code":"@Manual{,   title = {rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations},   author = {Andy Teucher and Kenton Russell},   year = {2023},   note = {https://github.com/ateucher/rmapshaper, http://andyteucher.ca/rmapshaper/}, }"},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"rmapshaper","dir":"","previous_headings":"","what":"Client for mapshaper for Geospatial Operations","title":"Client for mapshaper for Geospatial Operations","text":"R package providing access awesome mapshaper tool Matthew Bloch, Node.js command-line tool well interactive web tool. started package use mapshaper’s Visvalingam simplification method R. , far know, R package performs topologically-aware multi-polygon simplification. (means shared boundaries adjacent polygons always kept intact, gaps overlaps, even high levels simplification). mapshaper much simplification, working wrapping core functionality mapshaper R functions. far, rmapshaper provides following functions: ms_simplify - simplify polygons lines ms_clip - clip area layer using polygon layer bounding box. Works polygons, lines, points ms_erase - erase area layer using polygon layer bounding box. Works polygons, lines, points ms_dissolve - aggregate polygon features, optionally specifying field aggregate . field specified, merge polygons one. ms_explode - convert multipart shapes single part. Works polygons, lines, points geojson format, currently polygons lines Spatial classes (SpatialMultiPoints SpatialMultiPointsDataFrame). ms_lines - convert polygons topological boundaries (lines) ms_innerlines - convert polygons shared inner boundaries (lines) ms_points - create points polygon layer ms_filter_fields - Remove fields attributes ms_filter_islands - Remove small detached polygons run bugs feature requests, please file issue","code":""},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Client for mapshaper for Geospatial Operations","text":"rmapshaper CRAN. Install current version : can install development version github remotes:","code":"install.packages(\"rmapshaper\") ## install.packages(\"remotes\") library(remotes) install_github(\"ateucher/rmapshaper\")"},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Client for mapshaper for Geospatial Operations","text":"rmapshaper works sf objects well geojson strings (character objects class geo_json). also works Spatial classes sp package, though likely retired future; users encouraged use modern sf package. use nc.gpkg file (North Carolina county boundaries) sf package read sf object: Plot original:  Now simplify using default parameters, plot simplified North Carolina counties:  can see even high levels simplification, mapshaper simplification algorithm preserves topology, including shared boundaries. keep parameter specifies proportion vertices keep:  Compare output using sf::st_simplify, overlaps gaps evident:  time ’ll demonstrate ms_innerlines function:  functions quite fast geojson character objects. slower sf Spatial classes due internal conversion /json. going multiple operations large sf objects, ’s recommended first convert json using geojsonsf::sf_geojson(), geojsonio::geojson_json(). functions input object first argument, return class object input. , can chained together. totally contrived example, using nc_sf created :","code":"library(rmapshaper) library(sf) #> Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE  file <- system.file(\"gpkg/nc.gpkg\", package = \"sf\") nc_sf <- read_sf(file) plot(nc_sf[\"FIPS\"]) nc_simp <- ms_simplify(nc_sf) plot(nc_simp[\"FIPS\"]) nc_very_simp <- ms_simplify(nc_sf, keep = 0.001) plot(nc_very_simp[\"FIPS\"]) nc_stsimp <- st_simplify(nc_sf, preserveTopology = TRUE, dTolerance = 10000) # dTolerance specified in meters plot(nc_stsimp[\"FIPS\"]) nc_sf_innerlines <- ms_innerlines(nc_sf) plot(nc_sf_innerlines) library(geojsonsf) library(rmapshaper) library(sf)  ## First convert 'states' dataframe from geojsonsf pkg to json  nc_sf %>%    sf_geojson() |>    ms_erase(bbox = c(-80, 35, -79, 35.5)) |>  # Cut a big hole in the middle   ms_dissolve() |>  # Dissolve county borders   ms_simplify(keep_shapes = TRUE, explode = TRUE) |> # Simplify polygon   geojson_sf() |> # Convert to sf object   plot(col = \"blue\") # plot"},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"using-the-system-mapshaper","dir":"","previous_headings":"","what":"Using the system mapshaper","title":"Client for mapshaper for Geospatial Operations","text":"Sometimes dealing large spatial object R, rmapshaper functions take long time work . version 0.4.0, can make use system mapshaper library installed. allow work large spatial objects. First make sure mapshaper installed: get error, need install mapshaper. First install node (https://nodejs.org/en) install mapshaper command prompt : can use sys argument rmapshaper function:","code":"check_sys_mapshaper() #> mapshaper version 0.6.25 is installed and on your PATH #>                     mapshaper-xl  #> \"/opt/homebrew/bin/mapshaper-xl\" $ npm install -g mapshaper nc_simp_internal <- ms_simplify(nc_sf) nc_simp_sys <- ms_simplify(nc_sf, sys = TRUE, sys_mem=8) #sys_mem specifies the amount of memory to use in Gb.  It defaults to 8 if omitted.   par(mfrow = c(1,2)) plot(st_geometry(nc_simp_internal), main = \"internal\") plot(st_geometry(nc_simp_sys), main = \"system\")"},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"thanks","dir":"","previous_headings":"","what":"Thanks","title":"Client for mapshaper for Geospatial Operations","text":"package uses V8 package provide environment run mapshaper’s javascript code R. relies heavily great spatial packages already exist (especially sf), geojsonio geojsonsf packages converting geojson, sf Spatial object. Thanks timelyportfolio helping wrangle javascript point works V8. also wrote mapshaper htmlwidget, provides access mapshaper web interface, right R session. plans combine two future.","code":""},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Client for mapshaper for Geospatial Operations","text":"Please note project released Contributor Code Conduct. participating project agree abide terms.","code":""},{"path":"http://andyteucher.ca/rmapshaper/index.html","id":"license","dir":"","previous_headings":"","what":"LICENSE","title":"Client for mapshaper for Geospatial Operations","text":"MIT","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/apply_mapshaper_commands.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a mapshaper command string to a geojson object — apply_mapshaper_commands","title":"Apply a mapshaper command string to a geojson object — apply_mapshaper_commands","text":"Apply mapshaper command string geojson object","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/apply_mapshaper_commands.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a mapshaper command string to a geojson object — apply_mapshaper_commands","text":"","code":"apply_mapshaper_commands(   data,   command,   force_FC = TRUE,   sys = FALSE,   sys_mem = getOption(\"mapshaper.sys_mem\", default = 8),   quiet = getOption(\"mapshaper.sys_quiet\", default = FALSE) )"},{"path":"http://andyteucher.ca/rmapshaper/reference/apply_mapshaper_commands.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a mapshaper command string to a geojson object — apply_mapshaper_commands","text":"data character containing geojson path geojson file. file path, sys must true. command valid mapshaper command string force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/apply_mapshaper_commands.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a mapshaper command string to a geojson object — apply_mapshaper_commands","text":"geojson","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/apply_mapshaper_commands.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a mapshaper command string to a geojson object — apply_mapshaper_commands","text":"","code":"nc <- sf::read_sf(system.file(\"gpkg/nc.gpkg\", package = \"sf\")) rmapshaper::apply_mapshaper_commands(geojsonsf::sf_geojson(nc), \"-clean\") #> <geojson>  #> Loading required namespace: stringi #>   type:  FeatureCollection  #>   #>"},{"path":"http://andyteucher.ca/rmapshaper/reference/check_sys_mapshaper.html","id":null,"dir":"Reference","previous_headings":"","what":"Check the system mapshaper — check_sys_mapshaper","title":"Check the system mapshaper — check_sys_mapshaper","text":"Check system mapshaper","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/check_sys_mapshaper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check the system mapshaper — check_sys_mapshaper","text":"","code":"check_sys_mapshaper(command = \"mapshaper-xl\", verbose = TRUE)"},{"path":"http://andyteucher.ca/rmapshaper/reference/check_sys_mapshaper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check the system mapshaper — check_sys_mapshaper","text":"command either \"mapshaper-xl\" (default) \"mapshaper\" verbose Print message stating mapshaper's current version? Default TRUE","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/check_sys_mapshaper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check the system mapshaper — check_sys_mapshaper","text":"character path mapshaper executable appropriate version installed, otherwise throws error","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/drop_null_geometries.html","id":null,"dir":"Reference","previous_headings":"","what":"Drop features from a geo_json FeatureCollection with null geometries — drop_null_geometries","title":"Drop features from a geo_json FeatureCollection with null geometries — drop_null_geometries","text":"Drop features geo_json FeatureCollection null geometries","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/drop_null_geometries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Drop features from a geo_json FeatureCollection with null geometries — drop_null_geometries","text":"","code":"drop_null_geometries(x)"},{"path":"http://andyteucher.ca/rmapshaper/reference/drop_null_geometries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Drop features from a geo_json FeatureCollection with null geometries — drop_null_geometries","text":"x geo_json FeatureCollection","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/drop_null_geometries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Drop features from a geo_json FeatureCollection with null geometries — drop_null_geometries","text":"geo_json FeatureCollection Features null geometries removed","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_clip.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove features or portions of features that fall outside a clipping area. — ms_clip","title":"Remove features or portions of features that fall outside a clipping area. — ms_clip","text":"Removes portions target layer fall outside clipping layer bounding box.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_clip.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove features or portions of features that fall outside a clipping area. — ms_clip","text":"","code":"ms_clip(target, clip = NULL, bbox = NULL, remove_slivers = FALSE, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_clip.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove features or portions of features that fall outside a clipping area. — ms_clip","text":"target target layer remove portions. One : geo_json character points, lines, polygons; SpatialPolygons, SpatialLines, SpatialPoints; sf sfc points, lines, polygons object clip clipping layer (polygon). One : geo_json character polygons; SpatialPolygons*; sf sfc polygons object bbox supply bounding box instead clipping layer extract target layer. Supply numeric vector: c(minX, minY, maxX, maxY). remove_slivers Remove tiny sliver polygons created clipping. (Default FALSE) ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_clip.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove features or portions of features that fall outside a clipping area. — ms_clip","text":"clipped target class input target","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_clip.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove features or portions of features that fall outside a clipping area. — ms_clip","text":"","code":"if (rmapshaper:::check_v8_major_version() >= 6L) {   library(geojsonsf, quietly = TRUE)   library(sf)    poly <- structure(\"{\\\"type\\\":\\\"FeatureCollection\\\",     \\\"features\\\":[{\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},     \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",\\\"coordinates\\\":     [[[52.8658,-44.7219],[53.7702,-40.4873],[55.3204,-37.5579],     [56.2757,-37.917],[56.184,-40.6443],[61.0835,-40.7529],     [58.0202,-43.634],[61.6699,-45.0678],[62.737,-46.2841],     [55.7763,-46.2637],[54.9742,-49.1184],[52.799,-45.9386],     [52.0329,-49.5677],[50.1747,-52.1814],[49.0098,-52.3641],     [52.7068,-45.7639],[43.2278,-47.1908],[48.4755,-45.1388],     [50.327,-43.5207],[48.0804,-41.2784],[49.6307,-40.6159],     [52.8658,-44.7219]]]}}]}\", class = c(\"geojson\", \"json\"))   poly <- geojson_sf(poly)   plot(poly)    clip_poly <- structure('{   \"type\": \"Feature\",   \"properties\": {},   \"geometry\": {   \"type\": \"Polygon\",   \"coordinates\": [   [   [51, -40],   [55, -40],   [55, -45],   [51, -45],   [51, -40]   ]   ]   }   }', class = c(\"geojson\", \"json\"))   clip_poly <- geojson_sf(clip_poly)   plot(clip_poly)    out <- ms_clip(poly, clip_poly)   plot(out, add = TRUE) } #> Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_dissolve.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate shapes in a polygon or point layer. — ms_dissolve","title":"Aggregate shapes in a polygon or point layer. — ms_dissolve","text":"Aggregates using specified field, shapes field given. point layers, replaces group points centroid.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_dissolve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate shapes in a polygon or point layer. — ms_dissolve","text":"","code":"ms_dissolve(   input,   field = NULL,   sum_fields = NULL,   copy_fields = NULL,   weight = NULL,   snap = TRUE,   ... )"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_dissolve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate shapes in a polygon or point layer. — ms_dissolve","text":"input spatial object dissolve. One : geo_json character points polygons; SpatialPolygons, SpatialPoints field field dissolve sum_fields fields sum copy_fields fields copy. first instance field copied aggregated feature. weight Name attribute field generating weighted centroids (points ). snap Snap together vertices within small distance threshold fix small coordinate misalignment adjacent polygons. Default TRUE. ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_dissolve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate shapes in a polygon or point layer. — ms_dissolve","text":"class input","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_dissolve.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate shapes in a polygon or point layer. — ms_dissolve","text":"","code":"library(geojsonsf) library(sf)  poly <- structure('{\"type\":\"FeatureCollection\",   \"features\":[   {\"type\":\"Feature\",   \"properties\":{\"a\": 1, \"b\": 2},   \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[   [102,2],[102,3],[103,3],[103,2],[102,2]   ]]}}   ,{\"type\":\"Feature\",   \"properties\":{\"a\": 5, \"b\": 3},   \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[   [100,0],[100,1],[101,1],[101,0],[100,0]   ]]}}]}', class = c(\"geojson\", \"json\")) poly <- geojson_sf(poly) plot(poly)  length(poly) #> [1] 3 poly #> Simple feature collection with 2 features and 2 fields #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 100 ymin: 0 xmax: 103 ymax: 3 #> Geodetic CRS:  WGS 84 #>   a b                       geometry #> 1 1 2 POLYGON ((102 2, 102 3, 103... #> 2 5 3 POLYGON ((100 0, 100 1, 101...  # Dissolve the polygon out <- ms_dissolve(poly) plot(out)  length(out) #> [1] 2 out #> Simple feature collection with 1 feature and 1 field #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: 100 ymin: 0 xmax: 103 ymax: 3 #> Geodetic CRS:  WGS 84 #>   rmapshaperid                       geometry #> 1            0 MULTIPOLYGON (((102 2, 103 ...  # Dissolve and summing columns out <- ms_dissolve(poly, sum_fields = c(\"a\", \"b\")) plot(out)  out #> Simple feature collection with 1 feature and 2 fields #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: 100 ymin: 0 xmax: 103 ymax: 3 #> Geodetic CRS:  WGS 84 #>   a b                       geometry #> 1 6 5 MULTIPOLYGON (((102 2, 103 ..."},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_erase.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove features or portions of features that fall inside a specified area — ms_erase","title":"Remove features or portions of features that fall inside a specified area — ms_erase","text":"Removes portions target layer fall inside erasing layer bounding box.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_erase.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove features or portions of features that fall inside a specified area — ms_erase","text":"","code":"ms_erase(target, erase = NULL, bbox = NULL, remove_slivers = FALSE, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_erase.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove features or portions of features that fall inside a specified area — ms_erase","text":"target target layer remove portions. One : geo_json character points, lines, polygons; SpatialPolygons, SpatialLines, SpatialPoints erase erase layer (polygon). One : geo_json character polygons; SpatialPolygons* bbox supply bounding box instead erasing layer remove target layer. Supply numeric vector: c(minX, minY, maxX, maxY). remove_slivers Remove tiny sliver polygons created erasing. (Default FALSE) ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_erase.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove features or portions of features that fall inside a specified area — ms_erase","text":"erased target format input target","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_erase.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove features or portions of features that fall inside a specified area — ms_erase","text":"","code":"if (rmapshaper:::check_v8_major_version() >= 6L) {   library(geojsonsf, quietly = TRUE)   library(sf)    points <- structure(\"{\\\"type\\\":\\\"FeatureCollection\\\",     \\\"features\\\":[{\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},     \\\"geometry\\\":{\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":     [52.8658,-44.7219]}},{\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},     \\\"geometry\\\":{\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":     [53.7702,-40.4873]}},{\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},     \\\"geometry\\\":{\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":[55.3204,-37.5579]}},     {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},\\\"geometry\\\":     {\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":[56.2757,-37.917]}},     {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},\\\"geometry\\\":     {\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":[56.184,-40.6443]}},     {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},\\\"geometry\\\":     {\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":[61.0835,-40.7529]}},     {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},\\\"geometry\\\":     {\\\"type\\\":\\\"Point\\\",\\\"coordinates\\\":[58.0202,-43.634]}}]}\",     class = c(\"geojson\", \"json\"))   points <- geojson_sf(points)   plot(points)    erase_poly <- structure('{   \"type\": \"Feature\",   \"properties\": {},   \"geometry\": {   \"type\": \"Polygon\",   \"coordinates\": [   [   [51, -40],   [55, -40],   [55, -45],   [51, -45],   [51, -40]   ]   ]   }   }', class = c(\"geojson\", \"json\"))   erase_poly <- geojson_sf(erase_poly)    out <- ms_erase(points, erase_poly)   plot(out, add = TRUE) }"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_explode.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert multipart lines or polygons to singlepart — ms_explode","title":"Convert multipart lines or polygons to singlepart — ms_explode","text":"objects class Spatial (e.g., SpatialPolygonsDataFrame), may find faster use sp::disaggregate.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_explode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert multipart lines or polygons to singlepart — ms_explode","text":"","code":"ms_explode(input, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_explode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert multipart lines or polygons to singlepart — ms_explode","text":"input One : geo_json character multipart lines, polygons; multipart SpatialPolygons, SpatialLines; sf sfc multipart lines, polygons object ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_explode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert multipart lines or polygons to singlepart — ms_explode","text":"class input","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_explode.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert multipart lines or polygons to singlepart — ms_explode","text":"currently method SpatialMultiPoints","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_explode.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert multipart lines or polygons to singlepart — ms_explode","text":"","code":"library(geojsonsf) library(sf)  poly <- \"{\\\"type\\\":\\\"FeatureCollection\\\",\\\"features\\\":           [\\n{\\\"type\\\":\\\"Feature\\\",\\\"geometry\\\":{\\\"type\\\":           \\\"MultiPolygon\\\",\\\"coordinates\\\":[[[[102,2],[102,3],           [103,3],[103,2],[102,2]]],[[[100,0],[100,1],[101,1],           [101,0],[100,0]]]]},\\\"properties\\\":{\\\"a\\\":0}}\\n]}\"  poly <- geojson_sf(poly) plot(poly)  length(poly) #> [1] 2 poly #> Simple feature collection with 1 feature and 1 field #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: 100 ymin: 0 xmax: 103 ymax: 3 #> Geodetic CRS:  WGS 84 #>   a                       geometry #> 1 0 MULTIPOLYGON (((102 2, 102 ...  # Explode the polygon out <- ms_explode(poly) plot(out)  length(out) #> [1] 2 out #> Simple feature collection with 2 features and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 100 ymin: 0 xmax: 103 ymax: 3 #> Geodetic CRS:  WGS 84 #>   a                       geometry #> 1 0 POLYGON ((102 2, 103 2, 103... #> 2 0 POLYGON ((100 0, 101 0, 101..."},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_fields.html","id":null,"dir":"Reference","previous_headings":"","what":"Delete fields in the attribute table — ms_filter_fields","title":"Delete fields in the attribute table — ms_filter_fields","text":"Removes fields except listed fields parameter","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_fields.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Delete fields in the attribute table — ms_filter_fields","text":"","code":"ms_filter_fields(input, fields, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_fields.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Delete fields in the attribute table — ms_filter_fields","text":"input spatial object filter fields . One : geo_json character points, lines, polygons; SpatialPolygonsDataFrame, SpatialLinesDataFrame, SpatialPointsDataFrame; sf object fields character vector fields retain. ... Arguments passed apply_mapshaper_commands sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_fields.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Delete fields in the attribute table — ms_filter_fields","text":"object specified attributes retained, class input","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_fields.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Delete fields in the attribute table — ms_filter_fields","text":"","code":"library(geojsonsf) library(sf)  poly <- structure(\"{\\\"type\\\":\\\"FeatureCollection\\\",                   \\\"features\\\":[{\\\"type\\\":\\\"Feature\\\",                   \\\"properties\\\":{\\\"a\\\": 1, \\\"b\\\":2, \\\"c\\\": 3},                   \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",                   \\\"coordinates\\\":[[[102,2],[102,4],[104,4],[104,2],[102,2]]]}}]}\",                   class = c(\"geojson\", \"json\")) poly <- geojson_sf(poly) poly #> Simple feature collection with 1 feature and 3 fields #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 102 ymin: 2 xmax: 104 ymax: 4 #> Geodetic CRS:  WGS 84 #>   a b c                       geometry #> 1 1 2 3 POLYGON ((102 2, 102 4, 104...  # Filter (keep) fields a and b, drop c out <- ms_filter_fields(poly, c(\"a\", \"b\")) out #> Simple feature collection with 1 feature and 2 fields #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 102 ymin: 2 xmax: 104 ymax: 4 #> Geodetic CRS:  WGS 84 #>   a b                       geometry #> 1 1 2 POLYGON ((102 2, 102 4, 104..."},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_islands.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove small detached polygons (islands) — ms_filter_islands","title":"Remove small detached polygons (islands) — ms_filter_islands","text":"Remove small detached polygons, keeping minimum area /minimum number vertices. Optionally remove null geometries.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_islands.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove small detached polygons (islands) — ms_filter_islands","text":"","code":"ms_filter_islands(   input,   min_area = NULL,   min_vertices = NULL,   drop_null_geometries = TRUE,   ... )"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_islands.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove small detached polygons (islands) — ms_filter_islands","text":"input spatial object filter. One : geo_json character polygons; SpatialPolygons*; sf sfc polygons object min_area minimum area polygons retain. Area calculated using planar geometry, except area unprojected polygons, calculated using spherical geometry units square meters. min_vertices minimum number vertices polygons retain. drop_null_geometries features empty geometries dropped? Default TRUE. Ignored SpatialPolyons*, always TRUE. ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_islands.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove small detached polygons (islands) — ms_filter_islands","text":"object specified features retained, class input","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_filter_islands.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove small detached polygons (islands) — ms_filter_islands","text":"","code":"library(geojsonsf) library(sf)  poly <- structure(\"{\\\"type\\\":\\\"FeatureCollection\\\",            \\\"features\\\":[{\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},            \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",            \\\"coordinates\\\":[[[102,2],[102,4],[104,4],[104,2],[102,2]]]}},            {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},            \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",            \\\"coordinates\\\":[[[100,2],[98,4],[101.5,4],[100,2]]]}},            {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{},            \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",            \\\"coordinates\\\":[[[100,0],[100,1],[101,1],[101,0],[100,0]]]}}]}\",            class = c(\"geojson\", \"json\"))  poly <- geojson_sf(poly) plot(poly)   out <- ms_filter_islands(poly, min_area = 12391399903) plot(out)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_innerlines.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a line layer consisting of shared boundaries with no attribute data — ms_innerlines","title":"Create a line layer consisting of shared boundaries with no attribute data — ms_innerlines","text":"Create line layer consisting shared boundaries attribute data","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_innerlines.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a line layer consisting of shared boundaries with no attribute data — ms_innerlines","text":"","code":"ms_innerlines(input, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_innerlines.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a line layer consisting of shared boundaries with no attribute data — ms_innerlines","text":"input input polygons object convert inner lines. One : geo_json character polygons; SpatialPolygons*; sf sfc polygons object ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_innerlines.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a line layer consisting of shared boundaries with no attribute data — ms_innerlines","text":"lines class input layer, without attributes","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_innerlines.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a line layer consisting of shared boundaries with no attribute data — ms_innerlines","text":"","code":"library(geojsonsf) library(sf)  poly <- structure('{\"type\":\"FeatureCollection\",             \"features\":[               {\"type\":\"Feature\",                 \"properties\":{\"foo\": \"a\"},                 \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[                   [102,2],[102,3],[103,3],[103,2],[102,2]                   ]]}}               ,{\"type\":\"Feature\",                 \"properties\":{\"foo\": \"a\"},                 \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[                   [103,3],[104,3],[104,2],[103,2],[103,3]                   ]]}},               {\"type\":\"Feature\",                 \"properties\":{\"foo\": \"b\"},                 \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[                   [102,1],[102,2],[103,2],[103,1],[102,1]                   ]]}},               {\"type\":\"Feature\",                 \"properties\":{\"foo\": \"b\"},                 \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[                   [103,1],[103,2],[104,2],[104,1],[103,1]                   ]]}}]}', class = c(\"geojson\", \"json\"))  poly <- geojson_sf(poly) plot(poly)   out <- ms_innerlines(poly) plot(out)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_lines.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert polygons to topological boundaries (lines) — ms_lines","title":"Convert polygons to topological boundaries (lines) — ms_lines","text":"Convert polygons topological boundaries (lines)","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_lines.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert polygons to topological boundaries (lines) — ms_lines","text":"","code":"ms_lines(input, fields = NULL, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_lines.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert polygons to topological boundaries (lines) — ms_lines","text":"input input polygons object convert inner lines. One : geo_json character polygons; SpatialPolygons*; sf sfc polygons object fields character vector field names. left NULL (default), external (unshared) boundaries attributed TYPE 0 internal (shared) boundaries TYPE 1. Giving field name adds intermediate level hierarchy TYPE 1, lowest-level internal boundaries set TYPE 2. Supplying character vector field names adds additional levels hierarchy. ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_lines.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert polygons to topological boundaries (lines) — ms_lines","text":"topological boundaries lines, class input","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_lines.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert polygons to topological boundaries (lines) — ms_lines","text":"","code":"library(geojsonsf) library(sf)  poly <- structure('{\"type\":\"FeatureCollection\",              \"features\":[              {\"type\":\"Feature\",              \"properties\":{\"foo\": \"a\"},              \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[              [102,2],[102,3],[103,3],[103,2],[102,2]              ]]}}              ,{\"type\":\"Feature\",              \"properties\":{\"foo\": \"a\"},              \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[              [103,3],[104,3],[104,2],[103,2],[103,3]              ]]}},              {\"type\":\"Feature\",              \"properties\":{\"foo\": \"b\"},              \"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[              [102.5,1],[102.5,2],[103.5,2],[103.5,1],[102.5,1]              ]]}}]}', class = c(\"geojson\", \"json\"))  poly <- geojson_sf(poly) summary(poly) #>      foo                     geometry #>  Length:3           POLYGON      :3   #>  Class :character   epsg:4326    :0   #>  Mode  :character   +proj=long...:0   plot(poly)   out <- ms_lines(poly) summary(out) #>       RANK          TYPE                    geometry #>  Min.   :0.00   Length:4           LINESTRING   :4   #>  1st Qu.:0.00   Class :character   epsg:4326    :0   #>  Median :0.00   Mode  :character   +proj=long...:0   #>  Mean   :0.25                                        #>  3rd Qu.:0.25                                        #>  Max.   :1.00                                        plot(out)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_points.html","id":null,"dir":"Reference","previous_headings":"","what":"Create points from a polygon layer — ms_points","title":"Create points from a polygon layer — ms_points","text":"Can generated polygons specifying location \"centroid\" \"inner\", specifying fields attributes layer containing x y coordinates.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_points.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create points from a polygon layer — ms_points","text":"","code":"ms_points(input, location = NULL, x = NULL, y = NULL, ...)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_points.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create points from a polygon layer — ms_points","text":"input input polygons object convert points. One : geo_json character polygons; SpatialPolygons*; sf sfc polygons object location either \"centroid\" \"inner\". \"centroid\", creates points centroid largest ring polygon feature. \"inner\", creates points interior largest ring polygon feature. Inner points located away polygon boundaries. Must NULL x y specified. left NULL (default), use centroids. x name field containing x coordinate values. Must NULL location specified. y name field containing y coordinate values. Must NULL location specified. ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_points.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create points from a polygon layer — ms_points","text":"points class input.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_points.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create points from a polygon layer — ms_points","text":"","code":"library(geojsonsf) library(sf)  poly <- structure(\"{\\\"type\\\":\\\"FeatureCollection\\\",            \\\"features\\\":[{\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":            {\\\"x_pos\\\": 1, \\\"y_pos\\\": 2},            \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",            \\\"coordinates\\\":[[[102,2],[102,4],[104,4],[104,2],[102,2]]]}},            {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{\\\"x_pos\\\": 3, \\\"y_pos\\\": 4},            \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",            \\\"coordinates\\\":[[[100,2],[98,4],[101.5,4],[100,2]]]}},            {\\\"type\\\":\\\"Feature\\\",\\\"properties\\\":{\\\"x_pos\\\": 5, \\\"y_pos\\\": 6},            \\\"geometry\\\":{\\\"type\\\":\\\"Polygon\\\",            \\\"coordinates\\\":[[[100,0],[100,1],[101,1],[101,0],[100,0]]]}}]}\",            class = c(\"geojson\", \"json\"))  poly <- geojson_sf(poly) summary(poly) #>      x_pos       y_pos            geometry #>  Min.   :1   Min.   :2   POLYGON      :3   #>  1st Qu.:2   1st Qu.:3   epsg:4326    :0   #>  Median :3   Median :4   +proj=long...:0   #>  Mean   :3   Mean   :4                     #>  3rd Qu.:4   3rd Qu.:5                     #>  Max.   :5   Max.   :6                     plot(poly)   # Convert to points using centroids out <- ms_points(poly, location = \"centroid\") summary(out) #>      x_pos       y_pos            geometry #>  Min.   :1   Min.   :2   POINT        :3   #>  1st Qu.:2   1st Qu.:3   epsg:4326    :0   #>  Median :3   Median :4   +proj=long...:0   #>  Mean   :3   Mean   :4                     #>  3rd Qu.:4   3rd Qu.:5                     #>  Max.   :5   Max.   :6                     plot(out)   # Can also specify locations using attributes in the data out <- ms_points(poly, x = \"x_pos\", y = \"y_pos\") summary(out) #>      x_pos       y_pos            geometry #>  Min.   :1   Min.   :2   POINT        :3   #>  1st Qu.:2   1st Qu.:3   epsg:4326    :0   #>  Median :3   Median :4   +proj=long...:0   #>  Mean   :3   Mean   :4                     #>  3rd Qu.:4   3rd Qu.:5                     #>  Max.   :5   Max.   :6                     plot(out)"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_simplify.html","id":null,"dir":"Reference","previous_headings":"","what":"Topologically-aware geometry simplification. — ms_simplify","title":"Topologically-aware geometry simplification. — ms_simplify","text":"Uses mapshaper simplify polygons.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_simplify.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Topologically-aware geometry simplification. — ms_simplify","text":"","code":"ms_simplify(   input,   keep = 0.05,   method = NULL,   weighting = 0.7,   keep_shapes = FALSE,   no_repair = FALSE,   snap = TRUE,   explode = FALSE,   drop_null_geometries = TRUE,   snap_interval = NULL,   ... )"},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_simplify.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Topologically-aware geometry simplification. — ms_simplify","text":"input spatial object simplify. One : geo_json character polygons lines; SpatialPolygons* SpatialLines*; sf sfc polygons lines object keep proportion points retain (0-1; default 0.05) method simplification method use: \"vis\" Visvalingam algorithm, \"dp\" Douglas-Peuker algorithm. left NULL (default), uses Visvalingam simplification modifies area metric underweighting effective area points vertex acute angles, resulting smoother appearance. See https://github.com/mbloch/mapshaper/wiki/Simplification-Tipslink information. weighting Coefficient weighting Visvalingam simplification (default 0.7). Higher values produce smoother output. weighting=0 equivalent unweighted Visvalingam simplification. keep_shapes Prevent small polygon features disappearing high simplification (default FALSE) no_repair disable intersection repair simplification (default FALSE). snap Snap together vertices within small distance threshold fix small coordinate misalignment adjacent polygons. Default TRUE. explode multipart polygons converted singlepart polygons? prevents small shapes disappearing simplification keep_shapes = TRUE. Default FALSE drop_null_geometries Features null geometries dropped? Ignored Spatial* objects, always TRUE. snap_interval Specify snapping distance source units, must numeric. Default NULL ... Arguments passed apply_mapshaper_commands force_FC output forced FeatureCollection (sf object Spatial*DataFrame) even attributes? Default TRUE. FALSE attributes associated geometries, GeometryCollection (Spatial object dataframe, sfc) output. sys system mapshaper used instead bundled mapshaper? Gives better performance large files. Requires mapshaper node package installed PATH. sys_mem much memory (GB) allocated using system mapshaper (sys = TRUE)? Default 8. Ignored sys = FALSE. can also set globally option \"mapshaper.sys_mem\" quiet sys = TRUE, mapshaper messages silenced? Default FALSE. can also set globally option \"mapshaper.sys_quiet\"","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_simplify.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Topologically-aware geometry simplification. — ms_simplify","text":"simplified representation geometry class input","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/ms_simplify.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Topologically-aware geometry simplification. — ms_simplify","text":"","code":"# With a simple geojson object poly <- structure('{  \"type\": \"Feature\",  \"properties\": {},  \"geometry\": {    \"type\": \"Polygon\",    \"coordinates\": [[      [-70.603637, -33.399918],      [-70.614624, -33.395332],      [-70.639343, -33.392466],      [-70.659942, -33.394759],      [-70.683975, -33.404504],      [-70.697021, -33.419406],      [-70.701141, -33.434306],      [-70.700454, -33.446339],      [-70.694274, -33.458369],      [-70.682601, -33.465816],      [-70.668869, -33.472117],      [-70.646209, -33.473835],      [-70.624923, -33.472117],      [-70.609817, -33.468107],      [-70.595397, -33.458369],      [-70.587158, -33.442901],      [-70.587158, -33.426283],      [-70.590591, -33.414248],      [-70.594711, -33.406224],      [-70.603637, -33.399918]    ]]  } }', class = c(\"geojson\", \"json\"))  ms_simplify(poly, keep = 0.1) #> <geojson>  #>   type:  FeatureCollection  #>   #>    # With an sf object  poly_sf <- geojsonsf::geojson_sf(poly) ms_simplify(poly_sf, keep = 0.5) #> Simple feature collection with 1 feature and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: -70.70045 ymin: -33.47212 xmax: -70.58716 ymax: -33.39247 #> Geodetic CRS:  WGS 84 #>   rmapshaperid                       geometry #> 1            0 POLYGON ((-70.60364 -33.399..."},{"path":"http://andyteucher.ca/rmapshaper/reference/rmapshaper.html","id":null,"dir":"Reference","previous_headings":"","what":"rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations — rmapshaper","title":"rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations — rmapshaper","text":"Edit simplify 'geojson', 'Spatial', 'sf' objects. wrapper around 'mapshaper' 'javascript' library Matthew Bloch https://github.com/mbloch/mapshaper/ perform topologically-aware polygon simplification, well operations clipping, erasing, dissolving, converting 'multi-part' 'single-part' geometries.","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/rmapshaper.html","id":"rmapshaper-functions","dir":"Reference","previous_headings":"","what":"rmapshaper functions","title":"rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations — rmapshaper","text":"functions ms_simplify - simplify polygons lines ms_clip - clip area layer using polygon layer bounding box. Works polygons, lines, points ms_erase - erase area layer using polygon layer bounding box. Works polygons, lines, points ms_dissolve - aggregate polygon features, optionally specifying field aggregate . field specified, merge polygons one. ms_explode - convert multipart shapes single part. Works polygons, lines, points geojson format, currently polygons lines Spatial classes (SpatialMultiPoints SpatialMultiPointsDataFrame). ms_lines - convert polygons topological boundaries (lines) ms_innerlines - convert polygons shared inner boundaries (lines) ms_points - create points polygon layer ms_filter_fields - Remove fields attributes ms_filter_islands - Remove small detached polygons","code":""},{"path":"http://andyteucher.ca/rmapshaper/reference/rmapshaper.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations — rmapshaper","text":"Andy Teucher andy.teucher@gmail.com","code":""},{"path":[]},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-050","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.5.0","title":"rmapshaper 0.5.0","text":"CRAN release: 2023-04-11 fairly major release much internal plumbing changed. tried keep user-facing changes minimum, please report issues https://github.com/ateucher/rmapshaper/issues. Switched using geojsonsf package instead geojsonio object conversion (#118). Updated bundled mapshaper version v0.6.25 (#130). Dropped support geojson_list objects. rarely-used class geojsonio package (#118). Arguments force_FC, sys, sys_mem now passed apply_mapshaper_commands via ... rather explicitly, now documented ... section function. may break existing code passing values arguments position rather name, especially using force_FC ms_simplify end argument list. may also change class return value input classes functions (ms_lines ms_innerlines) force_FC inherit default TRUE functions. Added quiet argument silence mapshaper console messages using sys = TRUE. can controlled globally options(\"mapshaper.sys_quiet\" = TRUE) (#125). Added ability globally set system memory using system mapshaper via options(\"mapshaper.sys_mem\"=X), X amount memory GB.","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-046","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.6","title":"rmapshaper 0.4.6","text":"CRAN release: 2022-05-10 Fixed long-standing issue units columns sf objects cause failures; numeric columns class \"units\" now converted numeric running mapshaper commands. (#116, thanks @Robinlovelace) Added default value force_FC apply_mapshaper_commands(). default value TRUE (#120, thanks @dblodgett-usgs) Documentation fix check_sys_mapshaper() - fixed description return value (#117, thanks @dblodgett-usgs). Included example setting memory allocation using system mapshaper README (#114, thanks @baldeagle).","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-045","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.5","title":"rmapshaper 0.4.5","text":"CRAN release: 2021-05-26 Fixed bug functions fail space user’s tmpdir() path sys = TRUE (#107) Updated bundled mapshaper library v 0.4.163, fixed bug ms_erase (#110, #104, #112) sys = TRUE, now uses mapshaper-xl system call, allowing larger memory use. Default 8GB can specified new argument sys_mem (#94, #112) Internally switched using system2() system() flexibility","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-044","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.4","title":"rmapshaper 0.4.4","text":"CRAN release: 2020-04-01 Small fixes compatibility sf >= 0.9","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-043","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.3","title":"rmapshaper 0.4.3","text":"CRAN release: 2020-01-28 Add checks, package startup message, helpful errors case user old version libv8 installed, support many aspects modern JavaScript (ES6). appears impact ms_erase() ms_clip(). Using apply_mapshaper_commands() longer deletes file used local file (#99, #100)","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-042","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.2","title":"rmapshaper 0.4.2","text":"CRAN release: 2020-01-17 Added rgdal Suggests ms_clip ms_erase can transform Spatial* objects different CRSs. input sf object tibble, output now now also tibble, (#95, thanks @mdsumner) Upgraded mapshaper v0.4.107 Bumped minimum version V8 3.0","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-041","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.1","title":"rmapshaper 0.4.1","text":"CRAN release: 2018-10-16 Fixed bug using sys = TRUE fail Windows circumstances (#77) Fixed issue running rmapshaper functions sfc objects failed sf v0.7","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-040","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.4.0","title":"rmapshaper 0.4.0","text":"CRAN release: 2018-04-03","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"new-features-0-4-0","dir":"Changelog","previous_headings":"","what":"New features","title":"rmapshaper 0.4.0","text":"Added sys argument allow use system mapshaper ’s installed (#61)","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"improvements-and-bug-fixes-0-4-0","dir":"Changelog","previous_headings":"","what":"Improvements and bug fixes","title":"rmapshaper 0.4.0","text":"Upgraded mapshaper v0.4.64 (#60) sf::st_read() now used throughout reading disk geojson strings, allows greater consistency better performance. Better handling different column classes (#68, thanks @mdsumner) Avoid stackoverflow caused adding special geojson classes (#71, https://github.com/ropensci/geojsonio/issues/128) name sf column now properly retained (#70) Fixed issue encoding/special characters preserved (#67)","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-031","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.3.1","title":"rmapshaper 0.3.1","text":"Fixed bug converting geojson objects sf failed sf >= 0.5-6 (#64)","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-030","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.3.0","title":"rmapshaper 0.3.0","text":"CRAN release: 2017-08-16 Methods sf sfc classes added (#46) rmapshaperid column retained column, otherwise ’s dropped. ms_innerlines returns geometry sf Spatial*DataFrame classes. (#57) ms_dissolve gains weight argument generating weighted centroids dissolved points. (#39)","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-020","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.2.0","title":"rmapshaper 0.2.0","text":"CRAN release: 2017-02-16 Added snap_interval ms_simplify() (#43, @nikolai-b) Bug-fix: Respect drop_null_geometries argument ms_simplify.geo_list() (#45, @nikolai-b) Add Kent Russell (@timelyportfolio) authors list JavaScript expertise advice Add Matthew Bloch (@mbloch) authors list mapshaper copyright holder Update mapshaper version 0.3.41 V8 session now launched per function call destroyed function exits, rather created package load retained entire session (#49) Column classes now restored sent mapshaper functions (#46) Fixed bug small values keep ms_simplify() converted scientific notation (#48) Added weighting argument ms_simplify() (#27) Added remove_slivers argument ms_clip() ms_erase()","code":""},{"path":"http://andyteucher.ca/rmapshaper/news/index.html","id":"rmapshaper-010","dir":"Changelog","previous_headings":"","what":"rmapshaper 0.1.0","title":"rmapshaper 0.1.0","text":"CRAN release: 2016-06-29 Initial release","code":""}]
